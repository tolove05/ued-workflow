/**
 * Created with JetBrains WebStorm.
 * User: 松松
 * Date: 13-4-12
 * Time: 下午1:24
 * To change this template use File | Settings | File Templates.
 */

var mongodb = require('mongodb');
var server = new mongodb.Server("localhost", 27017, {safe: true});
var fed = new mongodb.Db('ued-workflow', server, {journal: true});

exports.mongodb = mongodb;

exports.dbServer = fed;

exports.client = undefined;

exports.Collection = mongodb.Collection;

exports.open = function () {
    fed.open(function (error, client) {
        exports.client = !error ? client : undefined;
        console.log(!error ? '数据库连接成功' : '无法连接数据库')
    });
};

fed.on('close', function () {
    console.log('Database connection is disconnected!\t' + new Date().toLocaleTimeString());
});

exports.open();

