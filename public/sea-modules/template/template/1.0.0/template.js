define("template/template/1.0.0/template",["./split"],function(require,exports,module){"use strict";function AMS_temporaryProtection(e){for(var A=0;AMS_PlaceholderFlag.length>A;A++){var _=AMS_PlaceholderFlag[A];e=e.replace(_[0],_[1].source)}return e=e.replace(/#js([\s\S]*?)#end/gm,"AMS_FLAG_JS$1AMS_FLAG_ENDJS")}function AMS_revertProtection(e){for(var A=0;AMS_PlaceholderFlag.length>A;A++){var _=AMS_PlaceholderFlag[A];e=e.replace(_[1],_[2])}return e}function AMS_ReplaceElse(e){return e=e.replace(/#(elseif)[\s]*(\([^)]+\)){1}/gm,"AMS_FLAG_ELSEIF$2"),e=e.replace(/#else/gm,"AMS_FLAG_ELSE"),e=e.replace(/AMSTEMPBLOCKS==(.*)==/gm,"\\#$1")}function AMS_TranslateIF(e){function A(){if(/#end/.test(e)){var _=e.match(/[\s\S]+?#end/)[0],M="";if(/#(if|each|js)/gm.test(_)){for(var n=[],a=0;S.length>a;a++){var E=S[a],l=_.lastIndexOf(E);l>-1&&n.push(l)}_=_.substring(Math.max.apply(null,n));var c=_.match(r),s=c[0].substring(1),L="",o="";"if"==s?(L="AMS_FLAG_IF",o="AMS_FLAG_ENDIF"):"each"==s?(L="AMS_FLAG_EACH",o="AMS_FLAG_ENDEACH"):"js"==s&&(L="AMS_FLAG_JS",o="AMS_FLAG_ENDJS"),M=_.replace(t,L+"$1"+o),"if"===s&&(M=AMS_ReplaceElse(M)),e=e.replace(_,M)}else M=_.substring(0,_.length-4),e=e.replace(_,M);A()}}function _(A){var _=/[\\]+#\{([^}]+)\}/gm;e=A.replace(_,"AMS_VARIABLE_COMMENT$1}"),e=e.replace(/#\{([^}]+)\}/gm,"AMS_PLACEHOLDER_START--$1--AMS_PLACEHOLDER_END")}e=AMS_temporaryProtection(e);var S=["#if","#each","#js"],r=/#(if|each|js)/gm,t=/(?:#if|#each|#js)([\s\S]+?)#end/gm;return A(),_(e),e}function AMS_TransportOperation(e){var A=/(AMS_FLAG_IF|AMS_FLAG_ELSEIF){1}(?:[\s]*([^)]+?\)))(.*?)(?=AMS_FLAG_ELSEIF|AMS_FLAG_ELSE|AMS_FLAG_ENDIF|AMS_FLAG_EACH|AMS_FLAG_JS|[\r\n])/gm;return e=e.replace(A,"$1AMS_OPERATION--$2--AMS_OPERATION$3")}function AMS_transportJS(e){var A=/AMS_FLAG_JS(?:[\s\S]+?)AMS_FLAG_ENDJS/gm,_=e.match(A);if(_)for(var S=0;_.length>S;S++){var r=_[S],t=r.match(/AMS_FLAG_JS([\s\S]+?)AMS_FLAG_ENDJS/);t&&(e=e.replace(r,"AMS_FLAG_JS"+encodeURIComponent(t[1])+"AMS_FLAG_ENDJS"))}return e}function AMS_transportVar(e){return e=e.replace(/^[\s]*#run(.+?)$/gm,"AMS_RUN_START$1AMS_RUN_END")}function AMS_CreateTpl(e,A){var _,S=" ",r='var AMS_RENDER=" ";\r\n;function echo(s){AMS_RENDER+=s;}\r\n';for(var t in A)A.hasOwnProperty(t)&&(r+="var "+t+' = AMS_DATA["'+t+'"];\r\n');var M;_=AMS_TranslateIF(e),_=AMS_transportJS(_),_=AMS_TransportOperation(_),_=AMS_transportVar(_),_=AMS_revertProtection(_),M=_.split(/[\r\n]/);for(var n=0;M.length>n;n++){for(var a=M[n],E=AMS_SPLIT(a,AMS_IF_FLAG),l=0;E.length>l;l++){var c=E[l];AMS_IF_FLAG.test(c)?/AMS_FLAG_IFAMS_OPERATION/.test(c)?S+=c.replace(/AMS_FLAG_IFAMS_OPERATION--(.+?)--AMS_OPERATION/g,"if $1 {"):/AMS_FLAG_ELSEIFAMS_OPERATION/.test(c)?S+=c.replace(/AMS_FLAG_ELSEIFAMS_OPERATION--(.+?)--AMS_OPERATION/,"} else if $1 { "):"AMS_FLAG_ELSE"===c?S+=c.replace(/AMS_FLAG_ELSE/,"} else {"):"AMS_FLAG_ENDIF"===c?S+=c.replace(/AMS_FLAG_ENDIF/gm,"}"):/AMS_FLAG_EACH/.test(c)?S+=c.replace(AMS_forEachRe,function(e){var A=e.match(AMS_forEachRe),_=A[1].split(","),S=A[2],r=_.length>1?_[1]:"index"+parseInt(1e8*Math.random(),10)+AMS_Index++;AMS_Index>999999999&&(AMS_Index=0);var t=_[2]?_[2]:S;return""+(_[2]?"var "+_[2]+"="+S+";":"")+"\r\n"+"for(var "+r+"=0;"+r+"<"+t+".length;"+r+"++){\r\n"+"var "+_[0]+"="+t+"["+r+"];\r\n"}):"AMS_FLAG_ENDEACH"===c?S+=c.replace(/AMS_FLAG_ENDEACH/gm,"};"):/AMS_PLACEHOLDER_START/.test(c)?S+=c.replace(/AMS_PLACEHOLDER_START--(.+?)--AMS_PLACEHOLDER_END/,"echo($1);"):/AMS_FLAG_JS/.test(c)?(c.match(/AMS_FLAG_JS(.+?)AMS_FLAG_ENDJS/),S+=c.replace(/AMS_FLAG_JS(.+?)AMS_FLAG_ENDJS/,decodeURIComponent(c.match(/AMS_FLAG_JS(.+?)AMS_FLAG_ENDJS/)[1])+"\r\n")):/AMS_RUN_START/.test(c)&&(S+=c.replace(/AMS_RUN_START(.+?)AMS_RUN_END/,"$1")):c.length>0&&(S+='AMS_RENDER+="'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'";'),c.length>0&&(S+="\r\n"),l===E.length-1&&(S+='AMS_RENDER+="\\r\\n";')}S+="\r\n"}return r+S}function AMS_Render(AMS_VALUE,AMS_DATA){return eval(AMS_CreateTpl(AMS_VALUE,AMS_DATA))}var AMS_SPLIT=require("./split").split,AMS_Index=0,AMS_PlaceholderFlag=[[/\\#if/gm,/AMS_IF_COMMENT/gm,"#if"],[/\\#elseif/gm,/AMS_ELSEIF_COMMENT/gm,"#elseif"],[/\\#else/gm,/AMS_ELSE_COMMENT/gm,"#else"],[/\\#each/gm,/AMS_EACH_COMMENT/gm,"#each"],[/\\#end/gm,/AMS_END_COMMENT/gm,"#end"],[/\\#run/gm,/AMS_RUN_COMMENT/gm,"#run"],[/\\#js/gm,/AMS_JS_COMMENT/gm,"#js"],[/\\#\{/,/AMS_VARIABLE_COMMENT/,"#{"],[/\$/gim,/AMS_RE/gm,"$"],[/\\\)/gim,/AMS_CLOSE/gm,")"]],AMS_OPEN_IF=["AMS_FLAG_IFAMS_OPERATION","AMS_FLAG_ELSEIFAMS_OPERATION"],AMS_CLOSE_IF="AMS_OPERATION",AMS_IF_FLAG=RegExp("("+AMS_OPEN_IF[0]+"--(?:.+?)--"+AMS_CLOSE_IF+"|"+AMS_OPEN_IF[1]+"--(?:.+?)--"+AMS_CLOSE_IF+"|"+"AMS_FLAG_EACH(?:\\([^)]+?\\))|"+"AMS_PLACEHOLDER_START"+"--(?:.+?)--"+"AMS_PLACEHOLDER_END|"+"AMS_FLAG_JS(?:.+?)AMS_FLAG_ENDJS|"+"AMS_RUN_START(?:.+?)AMS_RUN_END|"+"AMS_FLAG_ELSE|AMS_FLAG_ENDIF|AMS_FLAG_ENDEACH)","gm"),AMS_forEachRe=/AMS_FLAG_EACH\((.+?)[\s]+in[\s]+([^\s]+)\)/;module.exports?module.exports=AMS_Render:window.template===void 0?window.template=AMS_Render:null}),define("template/template/1.0.0/split",[],function(e,A){var _;_=_||function(e){var A,_=String.prototype.split,S=/()??/.exec("")[1]===e;return A=function(A,r,t){if("[object RegExp]"!==Object.prototype.toString.call(r))return _.call(A,r,t);var M,n,a,E,l=[],c=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),s=0,r=RegExp(r.source,c+"g");for(A+="",S||(M=RegExp("^"+r.source+"$(?!\\s)",c)),t=t===e?-1>>>0:t>>>0;(n=r.exec(A))&&(a=n.index+n[0].length,!(a>s&&(l.push(A.slice(s,n.index)),!S&&n.length>1&&n[0].replace(M,function(){for(var A=1;arguments.length-2>A;A++)arguments[A]===e&&(n[A]=e)}),n.length>1&&n.index<A.length&&Array.prototype.push.apply(l,n.slice(1)),E=n[0].length,s=a,l.length>=t)));)r.lastIndex===n.index&&r.lastIndex++;return s===A.length?E||!r.test(""):l.push(A.slice(s)),l.length>t?l.slice(0,t):l},String.prototype.split=function(e,_){return A(this,e,_)},A}(),A.split=_});
